{"components":{"securitySchemes":{"SanctumToken":{"bearerFormat":"Sanctum PAT","scheme":"bearer","type":"http"}}},"info":{"contact":{"name":"OpenAgents","url":"https://openagents.com"},"description":"OpenAgents REST API (Laravel). Primary auth is Sanctum bearer tokens for /api endpoints.","title":"OpenAgents API","version":"1.0.0"},"openapi":"3.0.2","paths":{"/api/agent-payments/balance":{"get":{"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"}},"summary":"Get current wallet balance for authenticated user.","tags":["Agent Payments"]}},"/api/agent-payments/invoice":{"post":{"requestBody":{"content":{"application/json":{"schema":{"properties":{"amountSats":{"example":1000,"type":"integer"},"description":{"example":"Fund agent wallet","nullable":true,"type":"string"}},"required":["amountSats"],"type":"object"}}},"description":"Create a Lightning invoice from the authenticated user wallet.","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Create a Lightning invoice from the authenticated user's wallet.","tags":["Agent Payments"]}},"/api/agent-payments/pay":{"post":{"requestBody":{"content":{"application/json":{"schema":{"properties":{"host":{"example":"sats4ai.com","nullable":true,"type":"string"},"invoice":{"example":"lnbc10u1...","type":"string"},"maxAmountMsats":{"example":100000,"nullable":true,"type":"integer"},"maxAmountSats":{"example":100,"nullable":true,"type":"integer"},"timeoutMs":{"example":12000,"nullable":true,"type":"integer"}},"required":["invoice"],"type":"object"}}},"description":"Pay a BOLT11 invoice from the authenticated user wallet.","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Pay a BOLT11 invoice from the authenticated user's wallet.","tags":["Agent Payments"]}},"/api/agent-payments/send-spark":{"post":{"requestBody":{"content":{"application/json":{"schema":{"properties":{"amountSats":{"example":21,"type":"integer"},"sparkAddress":{"example":"someone@spark.wallet","type":"string"},"timeoutMs":{"example":12000,"nullable":true,"type":"integer"}},"required":["sparkAddress","amountSats"],"type":"object"}}},"description":"Send sats to a Spark address from the authenticated user wallet.","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Send sats to another Spark address from authenticated user's wallet.","tags":["Agent Payments"]}},"/api/agent-payments/wallet":{"get":{"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"}},"summary":"Get the authenticated user's Spark wallet metadata.","tags":["Agent Payments"]},"post":{"requestBody":{"content":{"application/json":{"schema":{"properties":{"mnemonic":{"example":"abandon ability able about above absent absorb abstract absurd abuse access accident","nullable":true,"type":"string"}},"type":"object"}}},"description":"Create a new Spark wallet for the current user, or import an existing one with a mnemonic."},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Create or import wallet for the authenticated user.","tags":["Agent Payments"]}},"/api/agents/me/balance":{"get":{"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"}},"summary":"Get current wallet balance for authenticated user.","tags":["Agent Payments"]}},"/api/agents/me/wallet":{"get":{"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"}},"summary":"Get the authenticated user's Spark wallet metadata.","tags":["Agent Payments"]},"post":{"requestBody":{"content":{"application/json":{"schema":{"properties":{"mnemonic":{"example":"abandon ability able about above absent absorb abstract absurd abuse access accident","nullable":true,"type":"string"}},"type":"object"}}},"description":"Create a new Spark wallet for the current user, or import an existing one with a mnemonic."},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Create or import wallet for the authenticated user.","tags":["Agent Payments"]}},"/api/auth/register":{"post":{"description":"This bypasses WorkOS email code auth and is intended for staging\nautomation. Controlled by `OA_API_SIGNUP_ENABLED`.","responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Bootstrap an API user + bearer token (staging/automation).","tags":["Auth"]}},"/api/autopilots":{"get":{"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"items":{"properties":{"avatar":{"nullable":true,"type":"string"},"configVersion":{"type":"integer"},"createdAt":{"format":"date-time","nullable":true,"type":"string"},"displayName":{"type":"string"},"handle":{"type":"string"},"id":{"type":"string"},"ownerUserId":{"type":"integer"},"status":{"type":"string"},"tagline":{"nullable":true,"type":"string"},"updatedAt":{"format":"date-time","nullable":true,"type":"string"},"visibility":{"type":"string"}},"type":"object"},"type":"array"}},"type":"object"}}},"description":"Autopilot list payload"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"}},"summary":"List autopilots owned by the authenticated user.","tags":["Autopilot"]},"post":{"requestBody":{"content":{"application/json":{"schema":{"properties":{"avatar":{"maxLength":255,"nullable":true,"type":"string"},"displayName":{"example":"EP212 Bot","maxLength":120,"nullable":true,"type":"string"},"handle":{"example":"ep212-bot","maxLength":64,"nullable":true,"type":"string"},"status":{"example":"active","nullable":true,"type":"string"},"tagline":{"maxLength":255,"nullable":true,"type":"string"},"visibility":{"example":"private","nullable":true,"type":"string"}},"type":"object"}}},"description":"Create an autopilot resource.","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"properties":{"avatar":{"nullable":true,"type":"string"},"configVersion":{"type":"integer"},"createdAt":{"format":"date-time","nullable":true,"type":"string"},"displayName":{"type":"string"},"handle":{"type":"string"},"id":{"type":"string"},"ownerUserId":{"type":"integer"},"status":{"type":"string"},"tagline":{"nullable":true,"type":"string"},"updatedAt":{"format":"date-time","nullable":true,"type":"string"},"visibility":{"type":"string"}},"type":"object"}},"type":"object"}}},"description":"Autopilot resource payload"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Create an autopilot resource.","tags":["Autopilot"]}},"/api/autopilots/{autopilot}":{"get":{"parameters":[{"in":"path","name":"autopilot","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"properties":{"avatar":{"nullable":true,"type":"string"},"configVersion":{"type":"integer"},"createdAt":{"format":"date-time","nullable":true,"type":"string"},"displayName":{"type":"string"},"handle":{"type":"string"},"id":{"type":"string"},"ownerUserId":{"type":"integer"},"status":{"type":"string"},"tagline":{"nullable":true,"type":"string"},"updatedAt":{"format":"date-time","nullable":true,"type":"string"},"visibility":{"type":"string"}},"type":"object"}},"type":"object"}}},"description":"Autopilot resource payload"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"}},"summary":"Read one autopilot by id or handle.","tags":["Autopilot"]},"patch":{"parameters":[{"in":"path","name":"autopilot","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"properties":{"avatar":{"maxLength":255,"nullable":true,"type":"string"},"displayName":{"example":"Autopilot","maxLength":120,"nullable":true,"type":"string"},"policy":{"nullable":true,"properties":{"dataPolicy":{"additionalProperties":{"type":"string"},"type":"object"},"l402AllowedHosts":{"items":{"type":"string"},"type":"array"},"l402MaxSpendMsatsPerCall":{"nullable":true,"type":"integer"},"l402MaxSpendMsatsPerDay":{"nullable":true,"type":"integer"},"l402RequireApproval":{"nullable":true,"type":"boolean"},"model":{"maxLength":128,"nullable":true,"type":"string"},"modelProvider":{"maxLength":64,"nullable":true,"type":"string"},"toolAllowlist":{"items":{"type":"string"},"type":"array"},"toolDenylist":{"items":{"type":"string"},"type":"array"}},"type":"object"},"profile":{"nullable":true,"properties":{"autopilotVoice":{"maxLength":64,"nullable":true,"type":"string"},"onboardingAnswers":{"additionalProperties":{"type":"string"},"type":"object"},"ownerDisplayName":{"maxLength":120,"nullable":true,"type":"string"},"personaSummary":{"nullable":true,"type":"string"},"preferences":{"additionalProperties":{"type":"string"},"type":"object"},"principles":{"items":{"type":"string"},"type":"array"},"schemaVersion":{"nullable":true,"type":"integer"}},"type":"object"},"status":{"example":"active","nullable":true,"type":"string"},"tagline":{"maxLength":255,"nullable":true,"type":"string"},"visibility":{"example":"private","nullable":true,"type":"string"}},"type":"object"}}},"description":"Update autopilot fields and optional profile/policy blocks.","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"properties":{"avatar":{"nullable":true,"type":"string"},"configVersion":{"type":"integer"},"createdAt":{"format":"date-time","nullable":true,"type":"string"},"displayName":{"type":"string"},"handle":{"type":"string"},"id":{"type":"string"},"ownerUserId":{"type":"integer"},"status":{"type":"string"},"tagline":{"nullable":true,"type":"string"},"updatedAt":{"format":"date-time","nullable":true,"type":"string"},"visibility":{"type":"string"}},"type":"object"}},"type":"object"}}},"description":"Autopilot resource payload"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Update one autopilot.","tags":["Autopilot"]}},"/api/autopilots/{autopilot}/stream":{"post":{"description":"Resolves the owned autopilot, ensures a compatible thread exists,\nand then forwards to the canonical chat stream runtime.","parameters":[{"in":"path","name":"autopilot","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"properties":{"messages":{"items":{"properties":{"content":{"nullable":true,"type":"string"},"id":{"nullable":true,"type":"string"},"parts":{"items":{"properties":{"text":{"nullable":true,"type":"string"},"type":{"nullable":true,"type":"string"}},"type":"object"},"nullable":true,"type":"array"},"role":{"example":"user","type":"string"}},"type":"object"},"type":"array"}},"required":["messages"],"type":"object"}}},"description":"Full client-side message history; backend executes using the latest user message. L402 tool contract: `maxSpendMsats` is canonical (`maxSpendSats` temporary alias) and `requireApproval` is canonical (`approvalRequired` temporary alias).","required":true},"responses":{"200":{"content":{"text/event-stream":{"schema":{"example":"data: {\"type\":\"start\"}\n\ndata: [DONE]\n\n","type":"string"}}},"description":"Server-sent event stream (Vercel AI data stream protocol)"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Stream a run via autopilot alias route.","tags":["Autopilot"]}},"/api/autopilots/{autopilot}/threads":{"get":{"parameters":[{"description":"Maximum records to return (endpoint specific caps apply).","in":"query","name":"limit","required":false,"schema":{"example":100,"minimum":1,"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"items":{"properties":{"autopilotId":{"type":"string"},"createdAt":{"format":"date-time","nullable":true,"type":"string"},"id":{"type":"string"},"title":{"type":"string"},"updatedAt":{"format":"date-time","nullable":true,"type":"string"}},"type":"object"},"type":"array"}},"type":"object"}}},"description":"Autopilot thread list payload"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"}},"summary":"List threads for one autopilot.","tags":["Autopilot"]},"post":{"parameters":[{"in":"path","name":"autopilot","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"properties":{"title":{"example":"New autopilot conversation","maxLength":200,"nullable":true,"type":"string"}},"type":"object"}}},"description":"Create a new thread for an autopilot.","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"properties":{"autopilotId":{"type":"string"},"createdAt":{"format":"date-time","nullable":true,"type":"string"},"id":{"type":"string"},"title":{"type":"string"},"updatedAt":{"format":"date-time","nullable":true,"type":"string"}},"type":"object"}},"type":"object"}}},"description":"Autopilot thread payload"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Create a new thread for an autopilot.","tags":["Autopilot"]}},"/api/chat/stream":{"post":{"description":"Expects the full message history and executes against the latest non-empty\nuser message.","requestBody":{"content":{"application/json":{"schema":{"properties":{"messages":{"items":{"properties":{"content":{"nullable":true,"type":"string"},"id":{"nullable":true,"type":"string"},"parts":{"items":{"properties":{"text":{"nullable":true,"type":"string"},"type":{"nullable":true,"type":"string"}},"type":"object"},"nullable":true,"type":"array"},"role":{"example":"user","type":"string"}},"type":"object"},"type":"array"}},"required":["messages"],"type":"object"}}},"description":"Full client-side message history; backend executes using the latest user message. L402 tool contract: `maxSpendMsats` is canonical (`maxSpendSats` temporary alias) and `requireApproval` is canonical (`approvalRequired` temporary alias).","required":true},"responses":{"200":{"content":{"text/event-stream":{"schema":{"example":"data: {\"type\":\"start\"}\n\ndata: [DONE]\n\n","type":"string"}}},"description":"Server-sent event stream (Vercel AI data stream protocol)"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Stream a chat run over server-sent events.","tags":["Chat"]}},"/api/chats":{"get":{"description":"Returns recent thread ids/titles sorted by update time. Use the `limit` query\nparameter to bound result size.","parameters":[{"description":"Maximum records to return (endpoint specific caps apply).","in":"query","name":"limit","required":false,"schema":{"example":100,"minimum":1,"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"items":{"type":"object"},"type":"array"}},"type":"object"}}},"description":"Successful list response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"}},"summary":"List authenticated user's conversation threads.","tags":["Chat"]},"post":{"description":"Creates a conversation container and persists an initial thread title.","requestBody":{"content":{"application/json":{"schema":{"properties":{"title":{"example":"API Chat","nullable":true,"type":"string"}},"type":"object"}}},"description":"Optional title for the new conversation"},"responses":{"201":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Resource created"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Create a new conversation thread.","tags":["Chat"]}},"/api/chats/{conversationId}":{"get":{"description":"Returns the thread metadata plus current message/run snapshots for the\nauthenticated user.","parameters":[{"in":"path","name":"conversationId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"}},"summary":"Get one conversation with messages and runs.","tags":["Chat"]}},"/api/chats/{conversationId}/messages":{"get":{"description":"Returns normalized message records in chronological order.","parameters":[{"in":"path","name":"conversationId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"items":{"type":"object"},"type":"array"}},"type":"object"}}},"description":"Successful list response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"}},"summary":"List messages for a conversation.","tags":["Chat"]}},"/api/chats/{conversationId}/runs":{"get":{"description":"Returns run metadata sorted newest-first. Use `limit` to cap returned rows.","parameters":[{"description":"Maximum records to return (endpoint specific caps apply).","in":"query","name":"limit","required":false,"schema":{"example":100,"minimum":1,"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"items":{"type":"object"},"type":"array"}},"type":"object"}}},"description":"Successful list response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"}},"summary":"List runs for a conversation.","tags":["Chat"]}},"/api/chats/{conversationId}/runs/{runId}/events":{"get":{"description":"Returns the selected run plus ordered event payloads. Use `limit` to bound\nevent rows.","parameters":[{"description":"Maximum records to return (endpoint specific caps apply).","in":"query","name":"limit","required":false,"schema":{"example":100,"minimum":1,"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"}},"summary":"List events for a specific run.","tags":["Chat"]}},"/api/chats/{conversationId}/stream":{"post":{"description":"Expects the full message history and executes against the latest non-empty\nuser message.","parameters":[{"description":"Conversation identifier.","in":"path","name":"conversationId","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"properties":{"messages":{"items":{"properties":{"content":{"nullable":true,"type":"string"},"id":{"nullable":true,"type":"string"},"parts":{"items":{"properties":{"text":{"nullable":true,"type":"string"},"type":{"nullable":true,"type":"string"}},"type":"object"},"nullable":true,"type":"array"},"role":{"example":"user","type":"string"}},"type":"object"},"type":"array"}},"required":["messages"],"type":"object"}}},"description":"Full client-side message history; backend executes using the latest user message. L402 tool contract: `maxSpendMsats` is canonical (`maxSpendSats` temporary alias) and `requireApproval` is canonical (`approvalRequired` temporary alias).","required":true},"responses":{"200":{"content":{"text/event-stream":{"schema":{"example":"data: {\"type\":\"start\"}\n\ndata: [DONE]\n\n","type":"string"}}},"description":"Server-sent event stream (Vercel AI data stream protocol)"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Stream a chat run over server-sent events.","tags":["Chat"]}},"/api/l402/deployments":{"get":{"parameters":[{"description":"Optional autopilot scope filter by owned autopilot id or handle.","in":"query","name":"autopilot","required":false,"schema":{"example":"ep212-bot","maxLength":128,"minLength":1,"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"403":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"This action is unauthorized.","type":"string"}},"type":"object"}}},"description":"Forbidden"}},"summary":"List L402 deployment and gateway-related operational events.","tags":["L402"]}},"/api/l402/paywalls":{"get":{"parameters":[{"description":"Optional autopilot scope filter by owned autopilot id or handle.","in":"query","name":"autopilot","required":false,"schema":{"example":"ep212-bot","maxLength":128,"minLength":1,"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"403":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"This action is unauthorized.","type":"string"}},"type":"object"}}},"description":"Forbidden"}},"summary":"Get paywall aggregation by host/scope.","tags":["L402"]},"post":{"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"403":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"This action is unauthorized.","type":"string"}},"type":"object"}}},"description":"Forbidden"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Create a seller paywall route and reconcile Aperture configuration.","tags":["L402"]}},"/api/l402/paywalls/{paywallId}":{"delete":{"parameters":[{"in":"path","name":"paywallId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"403":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"This action is unauthorized.","type":"string"}},"type":"object"}}},"description":"Forbidden"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Delete (soft-delete) a seller paywall and reconcile Aperture configuration.","tags":["L402"]},"patch":{"parameters":[{"in":"path","name":"paywallId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"403":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"This action is unauthorized.","type":"string"}},"type":"object"}}},"description":"Forbidden"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Update an existing seller paywall and reconcile Aperture configuration.","tags":["L402"]}},"/api/l402/settlements":{"get":{"parameters":[{"description":"Optional autopilot scope filter by owned autopilot id or handle.","in":"query","name":"autopilot","required":false,"schema":{"example":"ep212-bot","maxLength":128,"minLength":1,"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"403":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"This action is unauthorized.","type":"string"}},"type":"object"}}},"description":"Forbidden"}},"summary":"Get settlement-focused paid receipt summary.","tags":["L402"]}},"/api/l402/transactions":{"get":{"description":"Returns paginated receipt rows that include payment, cache, and run\ncorrelation metadata.","parameters":[{"description":"Optional autopilot scope filter by owned autopilot id or handle.","in":"query","name":"autopilot","required":false,"schema":{"example":"ep212-bot","maxLength":128,"minLength":1,"type":"string"}},{"description":"Number of transaction rows per page (1-200).","in":"query","name":"per_page","required":false,"schema":{"example":30,"maximum":200,"minimum":1,"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"403":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"This action is unauthorized.","type":"string"}},"type":"object"}}},"description":"Forbidden"}},"summary":"List L402 transaction receipts.","tags":["L402"]}},"/api/l402/transactions/{eventId}":{"get":{"parameters":[{"in":"path","name":"eventId","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"}},"summary":"Get one L402 transaction receipt by event id.","tags":["L402"]}},"/api/l402/wallet":{"get":{"description":"Returns aggregate L402 payment stats, latest paid receipt, and configured\nclient-side policy settings.","parameters":[{"description":"Optional autopilot scope filter by owned autopilot id or handle.","in":"query","name":"autopilot","required":false,"schema":{"example":"ep212-bot","maxLength":128,"minLength":1,"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"403":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"This action is unauthorized.","type":"string"}},"type":"object"}}},"description":"Forbidden"}},"summary":"Get wallet-level Lightning spend summary.","tags":["L402"]}},"/api/me":{"get":{"description":"Returns current user profile fields and recent chat thread\nsummaries.","parameters":[{"description":"Maximum number of recent chat threads to include.","in":"query","name":"chat_limit","required":false,"schema":{"example":50,"maximum":200,"minimum":1,"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"properties":{"chatThreads":{"items":{"properties":{"id":{"type":"string"},"title":{"type":"string"},"updatedAt":{"format":"date-time","nullable":true,"type":"string"}},"type":"object"},"type":"array"},"user":{"properties":{"avatar":{"nullable":true,"type":"string"},"createdAt":{"format":"date-time","nullable":true,"type":"string"},"email":{"type":"string"},"handle":{"nullable":true,"type":"string"},"id":{"type":"integer"},"name":{"type":"string"},"updatedAt":{"format":"date-time","nullable":true,"type":"string"}},"type":"object"}},"type":"object"}},"type":"object"}}},"description":"Authenticated user profile and quick chat thread summary"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"}},"summary":"Get authenticated user context.","tags":["Auth"]}},"/api/payments/invoice":{"post":{"requestBody":{"content":{"application/json":{"schema":{"properties":{"amountSats":{"example":1000,"type":"integer"},"description":{"example":"Fund agent wallet","nullable":true,"type":"string"}},"required":["amountSats"],"type":"object"}}},"description":"Create a Lightning invoice from the authenticated user wallet.","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Create a Lightning invoice from the authenticated user's wallet.","tags":["Agent Payments"]}},"/api/payments/pay":{"post":{"requestBody":{"content":{"application/json":{"schema":{"properties":{"host":{"example":"sats4ai.com","nullable":true,"type":"string"},"invoice":{"example":"lnbc10u1...","type":"string"},"maxAmountMsats":{"example":100000,"nullable":true,"type":"integer"},"maxAmountSats":{"example":100,"nullable":true,"type":"integer"},"timeoutMs":{"example":12000,"nullable":true,"type":"integer"}},"required":["invoice"],"type":"object"}}},"description":"Pay a BOLT11 invoice from the authenticated user wallet.","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Pay a BOLT11 invoice from the authenticated user's wallet.","tags":["Agent Payments"]}},"/api/payments/send-spark":{"post":{"requestBody":{"content":{"application/json":{"schema":{"properties":{"amountSats":{"example":21,"type":"integer"},"sparkAddress":{"example":"someone@spark.wallet","type":"string"},"timeoutMs":{"example":12000,"nullable":true,"type":"integer"}},"required":["sparkAddress","amountSats"],"type":"object"}}},"description":"Send sats to a Spark address from the authenticated user wallet.","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Send sats to another Spark address from authenticated user's wallet.","tags":["Agent Payments"]}},"/api/settings/profile":{"delete":{"description":"Requires confirming the currently authenticated email address.","requestBody":{"content":{"application/json":{"schema":{"properties":{"email":{"format":"email","type":"string"}},"required":["email"],"type":"object"}}},"description":"Email confirmation required before deleting account","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Delete the authenticated account.","tags":["Profile"]},"get":{"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"properties":{"avatar":{"nullable":true,"type":"string"},"createdAt":{"format":"date-time","nullable":true,"type":"string"},"email":{"type":"string"},"id":{"type":"integer"},"name":{"type":"string"},"updatedAt":{"format":"date-time","nullable":true,"type":"string"}},"type":"object"}},"type":"object"}}},"description":"Authenticated user profile"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"}},"summary":"Get the authenticated user's profile.","tags":["Profile"]},"patch":{"description":"Currently supports `name` updates.","requestBody":{"content":{"application/json":{"schema":{"properties":{"name":{"example":"Christopher David","type":"string"}},"required":["name"],"type":"object"}}},"description":"Update profile fields","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"properties":{"avatar":{"nullable":true,"type":"string"},"createdAt":{"format":"date-time","nullable":true,"type":"string"},"email":{"type":"string"},"id":{"type":"integer"},"name":{"type":"string"},"updatedAt":{"format":"date-time","nullable":true,"type":"string"}},"type":"object"}},"type":"object"}}},"description":"Authenticated user profile"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Update profile fields.","tags":["Profile"]}},"/api/shouts":{"get":{"description":"Returns newest-first shout messages. Optionally filter by zone and since\ntimestamp, and paginate using `before_id`.","parameters":[{"description":"Optional shout zone filter (e.g. global, l402, dev).","in":"query","name":"zone","required":false,"schema":{"example":"global","maxLength":64,"type":"string"}},{"description":"Number of records to return (default 50, max effective 200).","in":"query","name":"limit","required":false,"schema":{"example":50,"minimum":1,"type":"integer"}},{"description":"Pagination cursor: return rows with id lower than this value.","in":"query","name":"before_id","required":false,"schema":{"example":12345,"minimum":1,"type":"integer"}},{"description":"Optional ISO-8601 timestamp for incremental polling.","in":"query","name":"since","required":false,"schema":{"format":"date-time","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"items":{"properties":{"author":{"properties":{"avatar":{"nullable":true,"type":"string"},"handle":{"type":"string"},"id":{"type":"integer"},"name":{"type":"string"}},"type":"object"},"body":{"type":"string"},"createdAt":{"format":"date-time","nullable":true,"type":"string"},"id":{"type":"integer"},"updatedAt":{"format":"date-time","nullable":true,"type":"string"},"visibility":{"type":"string"},"zone":{"nullable":true,"type":"string"}},"type":"object"},"type":"array"},"meta":{"properties":{"nextCursor":{"nullable":true,"type":"string"}},"type":"object"}},"type":"object"}}},"description":"Shout feed response"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"List public shouts.","tags":["Shouts"]},"post":{"requestBody":{"content":{"application/json":{"schema":{"properties":{"body":{"example":"hello world","maxLength":2000,"type":"string"},"zone":{"example":"global","maxLength":64,"nullable":true,"type":"string"}},"type":"object"}}},"description":"Create a public shout message.","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"properties":{"author":{"properties":{"avatar":{"nullable":true,"type":"string"},"handle":{"type":"string"},"id":{"type":"integer"},"name":{"type":"string"}},"type":"object"},"body":{"type":"string"},"createdAt":{"format":"date-time","nullable":true,"type":"string"},"id":{"type":"integer"},"updatedAt":{"format":"date-time","nullable":true,"type":"string"},"visibility":{"type":"string"},"zone":{"nullable":true,"type":"string"}},"type":"object"}},"type":"object"}}},"description":"Shout response payload"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"403":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"This action is unauthorized.","type":"string"}},"type":"object"}}},"description":"Forbidden"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Create a shout.","tags":["Shouts"]}},"/api/shouts/zones":{"get":{"parameters":[{"description":"Maximum records to return (endpoint specific caps apply).","in":"query","name":"limit","required":false,"schema":{"example":100,"minimum":1,"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"items":{"properties":{"count24h":{"type":"integer"},"zone":{"type":"string"}},"type":"object"},"type":"array"}},"type":"object"}}},"description":"Top shout zones by last-24h activity"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Return top shout zones for discovery.","tags":["Shouts"]}},"/api/tokens":{"delete":{"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"}},"summary":"Revoke all personal access tokens for the authenticated user.","tags":["Auth"]},"get":{"description":"Returns Sanctum tokens owned by the authenticated user, including whether\neach token is the current one.","responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"items":{"properties":{"abilities":{"items":{"type":"string"},"type":"array"},"createdAt":{"format":"date-time","nullable":true,"type":"string"},"expiresAt":{"format":"date-time","nullable":true,"type":"string"},"id":{"type":"integer"},"isCurrent":{"type":"boolean"},"lastUsedAt":{"format":"date-time","nullable":true,"type":"string"},"name":{"type":"string"}},"type":"object"},"type":"array"}},"type":"object"}}},"description":"List personal access tokens for the authenticated user"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"}},"summary":"List personal access tokens.","tags":["Auth"]},"post":{"description":"Returns the plain-text token once. Store it securely; it cannot be read\nagain from the API.","requestBody":{"content":{"application/json":{"schema":{"properties":{"abilities":{"example":["chat:read","chat:write"],"items":{"type":"string"},"type":"array"},"expires_at":{"format":"date-time","nullable":true,"type":"string"},"name":{"example":"api-cli","type":"string"}},"required":["name"],"type":"object"}}},"description":"Create a new Sanctum personal access token","required":true},"responses":{"201":{"content":{"application/json":{"schema":{"properties":{"data":{"properties":{"abilities":{"items":{"type":"string"},"type":"array"},"expiresAt":{"format":"date-time","nullable":true,"type":"string"},"name":{"type":"string"},"token":{"type":"string"},"tokenableId":{"type":"integer"}},"type":"object"}},"type":"object"}}},"description":"Token created; plain token value is returned once"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Create a personal access token.","tags":["Auth"]}},"/api/tokens/current":{"delete":{"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"}},"summary":"Revoke the current bearer token.","tags":["Auth"]}},"/api/tokens/{tokenId}":{"delete":{"parameters":[{"in":"path","name":"tokenId","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"type":"object"}},"type":"object"}}},"description":"Successful response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"}},"summary":"Revoke a specific personal access token.","tags":["Auth"]}},"/api/whispers":{"get":{"description":"Without `with`, returns a unified inbox/outbox stream. With `with`, returns\nthe direct thread between the actor and the referenced user.","parameters":[{"description":"Conversation peer id or handle (for thread-scoped whisper retrieval).","in":"query","name":"with","required":false,"schema":{"example":"agent:autopilot","type":"string"}},{"description":"Number of records to return (default 50, max effective 200).","in":"query","name":"limit","required":false,"schema":{"example":50,"minimum":1,"type":"integer"}},{"description":"Pagination cursor: return rows with id lower than this value.","in":"query","name":"before_id","required":false,"schema":{"example":12345,"minimum":1,"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"items":{"properties":{"body":{"type":"string"},"createdAt":{"format":"date-time","nullable":true,"type":"string"},"id":{"type":"integer"},"readAt":{"format":"date-time","nullable":true,"type":"string"},"recipient":{"properties":{"avatar":{"nullable":true,"type":"string"},"handle":{"type":"string"},"id":{"type":"integer"},"name":{"type":"string"}},"type":"object"},"sender":{"properties":{"avatar":{"nullable":true,"type":"string"},"handle":{"type":"string"},"id":{"type":"integer"},"name":{"type":"string"}},"type":"object"},"updatedAt":{"format":"date-time","nullable":true,"type":"string"}},"type":"object"},"type":"array"},"meta":{"properties":{"nextCursor":{"nullable":true,"type":"string"},"with":{"nullable":true,"type":"string"}},"type":"object"}},"type":"object"}}},"description":"Whisper inbox/thread response"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"403":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"This action is unauthorized.","type":"string"}},"type":"object"}}},"description":"Forbidden"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"List whispers for the authenticated user.","tags":["Whispers"]},"post":{"requestBody":{"content":{"application/json":{"schema":{"properties":{"body":{"example":"hey","maxLength":5000,"type":"string"},"recipientHandle":{"example":"agent:autopilot","nullable":true,"type":"string"},"recipientId":{"example":42,"nullable":true,"type":"integer"}},"type":"object"}}},"description":"Send a direct whisper to a user by id or handle.","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"properties":{"body":{"type":"string"},"createdAt":{"format":"date-time","nullable":true,"type":"string"},"id":{"type":"integer"},"readAt":{"format":"date-time","nullable":true,"type":"string"},"recipient":{"properties":{"avatar":{"nullable":true,"type":"string"},"handle":{"type":"string"},"id":{"type":"integer"},"name":{"type":"string"}},"type":"object"},"sender":{"properties":{"avatar":{"nullable":true,"type":"string"},"handle":{"type":"string"},"id":{"type":"integer"},"name":{"type":"string"}},"type":"object"},"updatedAt":{"format":"date-time","nullable":true,"type":"string"}},"type":"object"}},"type":"object"}}},"description":"Whisper response payload"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"403":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"This action is unauthorized.","type":"string"}},"type":"object"}}},"description":"Forbidden"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"},"422":{"content":{"application/json":{"schema":{"properties":{"errors":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},"message":{"example":"The given data was invalid.","type":"string"}},"type":"object"}}},"description":"Validation error"}},"summary":"Send a new whisper.","tags":["Whispers"]}},"/api/whispers/{id}/read":{"patch":{"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"properties":{"body":{"type":"string"},"createdAt":{"format":"date-time","nullable":true,"type":"string"},"id":{"type":"integer"},"readAt":{"format":"date-time","nullable":true,"type":"string"},"recipient":{"properties":{"avatar":{"nullable":true,"type":"string"},"handle":{"type":"string"},"id":{"type":"integer"},"name":{"type":"string"}},"type":"object"},"sender":{"properties":{"avatar":{"nullable":true,"type":"string"},"handle":{"type":"string"},"id":{"type":"integer"},"name":{"type":"string"}},"type":"object"},"updatedAt":{"format":"date-time","nullable":true,"type":"string"}},"type":"object"}},"type":"object"}}},"description":"Whisper response payload"},"401":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Unauthenticated.","type":"string"}},"type":"object"}}},"description":"Authentication required"},"403":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"This action is unauthorized.","type":"string"}},"type":"object"}}},"description":"Forbidden"},"404":{"content":{"application/json":{"schema":{"properties":{"message":{"example":"Not found.","type":"string"}},"type":"object"}}},"description":"Not found"}},"summary":"Mark a whisper as read.","tags":["Whispers"]}}},"security":[{"SanctumToken":[]}],"servers":[{"description":"Primary production server","url":"https://openagents.com.test"}],"tags":[{"description":"Authentication context and token lifecycle endpoints.","name":"Auth"},{"description":"Conversation, run, and stream endpoints.","name":"Chat"},{"description":"Autopilot resources, thread scoping, and stream alias routes.","name":"Autopilot"},{"description":"Authenticated profile management endpoints.","name":"Profile"},{"description":"Global public broadcast messages, optionally scoped by zone.","name":"Shouts"},{"description":"Direct messages between two users, inbox and thread retrieval.","name":"Whispers"},{"description":"Lightning L402 wallet, receipts, and deployment telemetry endpoints.","name":"L402"},{"description":"Per-user Spark wallet lifecycle and payment APIs (invoice + pay + spark transfers).","name":"Agent Payments"}],"x-generatedBy":"vyuldashev/laravel-openapi"}