{
    "openapi": "3.0.2",
    "info": {
        "title": "OpenAgents API",
        "description": "OpenAgents REST API (Laravel). Primary auth is Sanctum bearer tokens for \/api endpoints.",
        "contact": {
            "name": "OpenAgents",
            "url": "https:\/\/openagents.com"
        },
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "https:\/\/openagents.com.test",
            "description": "Primary production server"
        }
    ],
    "paths": {
        "\/api\/shouts": {
            "get": {
                "tags": [
                    "Shouts"
                ],
                "summary": "List public shouts.",
                "description": "Returns newest-first shout messages. Optionally filter by zone and since\ntimestamp, and paginate using `before_id`.",
                "parameters": [
                    {
                        "name": "zone",
                        "in": "query",
                        "description": "Optional shout zone filter (e.g. global, l402, dev).",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "maxLength": 64,
                            "example": "global"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Number of records to return (default 50, max effective 200).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "example": 50
                        }
                    },
                    {
                        "name": "before_id",
                        "in": "query",
                        "description": "Pagination cursor: return rows with id lower than this value.",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "example": 12345
                        }
                    },
                    {
                        "name": "since",
                        "in": "query",
                        "description": "Optional ISO-8601 timestamp for incremental polling.",
                        "required": false,
                        "schema": {
                            "format": "date-time",
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Shout feed response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "zone": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "body": {
                                                        "type": "string"
                                                    },
                                                    "visibility": {
                                                        "type": "string"
                                                    },
                                                    "author": {
                                                        "type": "object",
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer"
                                                            },
                                                            "name": {
                                                                "type": "string"
                                                            },
                                                            "handle": {
                                                                "type": "string"
                                                            },
                                                            "avatar": {
                                                                "type": "string",
                                                                "nullable": true
                                                            }
                                                        }
                                                    },
                                                    "createdAt": {
                                                        "format": "date-time",
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "updatedAt": {
                                                        "format": "date-time",
                                                        "type": "string",
                                                        "nullable": true
                                                    }
                                                }
                                            }
                                        },
                                        "meta": {
                                            "type": "object",
                                            "properties": {
                                                "nextCursor": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Shouts"
                ],
                "summary": "Create a shout.",
                "requestBody": {
                    "description": "Create a public shout message.",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "body": {
                                        "type": "string",
                                        "maxLength": 2000,
                                        "example": "hello world"
                                    },
                                    "zone": {
                                        "type": "string",
                                        "maxLength": 64,
                                        "nullable": true,
                                        "example": "global"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Shout response payload",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "zone": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "body": {
                                                    "type": "string"
                                                },
                                                "visibility": {
                                                    "type": "string"
                                                },
                                                "author": {
                                                    "type": "object",
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer"
                                                        },
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "handle": {
                                                            "type": "string"
                                                        },
                                                        "avatar": {
                                                            "type": "string",
                                                            "nullable": true
                                                        }
                                                    }
                                                },
                                                "createdAt": {
                                                    "format": "date-time",
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "updatedAt": {
                                                    "format": "date-time",
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "This action is unauthorized."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/shouts\/zones": {
            "get": {
                "tags": [
                    "Shouts"
                ],
                "summary": "Return top shout zones for discovery.",
                "parameters": [
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Maximum records to return (endpoint specific caps apply).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "example": 100
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Top shout zones by last-24h activity",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "zone": {
                                                        "type": "string"
                                                    },
                                                    "count24h": {
                                                        "type": "integer"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/me": {
            "get": {
                "tags": [
                    "Auth"
                ],
                "summary": "Get authenticated user context.",
                "description": "Returns current user profile fields and recent chat thread\nsummaries.",
                "parameters": [
                    {
                        "name": "chat_limit",
                        "in": "query",
                        "description": "Maximum number of recent chat threads to include.",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "maximum": 200,
                            "minimum": 1,
                            "example": 50
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Authenticated user profile and quick chat thread summary",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "user": {
                                                    "type": "object",
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer"
                                                        },
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "email": {
                                                            "type": "string"
                                                        },
                                                        "handle": {
                                                            "type": "string",
                                                            "nullable": true
                                                        },
                                                        "avatar": {
                                                            "type": "string",
                                                            "nullable": true
                                                        },
                                                        "createdAt": {
                                                            "format": "date-time",
                                                            "type": "string",
                                                            "nullable": true
                                                        },
                                                        "updatedAt": {
                                                            "format": "date-time",
                                                            "type": "string",
                                                            "nullable": true
                                                        }
                                                    }
                                                },
                                                "chatThreads": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "id": {
                                                                "type": "string"
                                                            },
                                                            "title": {
                                                                "type": "string"
                                                            },
                                                            "updatedAt": {
                                                                "format": "date-time",
                                                                "type": "string",
                                                                "nullable": true
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/tokens": {
            "get": {
                "tags": [
                    "Auth"
                ],
                "summary": "List personal access tokens.",
                "description": "Returns Sanctum tokens owned by the authenticated user, including whether\neach token is the current one.",
                "responses": {
                    "200": {
                        "description": "List personal access tokens for the authenticated user",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "abilities": {
                                                        "type": "array",
                                                        "items": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "lastUsedAt": {
                                                        "format": "date-time",
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "expiresAt": {
                                                        "format": "date-time",
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "createdAt": {
                                                        "format": "date-time",
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "isCurrent": {
                                                        "type": "boolean"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Create a personal access token.",
                "description": "Returns the plain-text token once. Store it securely; it cannot be read\nagain from the API.",
                "requestBody": {
                    "description": "Create a new Sanctum personal access token",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "name"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "api-cli"
                                    },
                                    "abilities": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        },
                                        "example": [
                                            "chat:read",
                                            "chat:write"
                                        ]
                                    },
                                    "expires_at": {
                                        "format": "date-time",
                                        "type": "string",
                                        "nullable": true
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Token created; plain token value is returned once",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "token": {
                                                    "type": "string"
                                                },
                                                "tokenableId": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "abilities": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    }
                                                },
                                                "expiresAt": {
                                                    "format": "date-time",
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Auth"
                ],
                "summary": "Revoke all personal access tokens for the authenticated user.",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/tokens\/current": {
            "delete": {
                "tags": [
                    "Auth"
                ],
                "summary": "Revoke the current bearer token.",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/tokens\/{tokenId}": {
            "delete": {
                "tags": [
                    "Auth"
                ],
                "summary": "Revoke a specific personal access token.",
                "parameters": [
                    {
                        "name": "tokenId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Not found."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/chats": {
            "get": {
                "tags": [
                    "Chat"
                ],
                "summary": "List authenticated user's conversation threads.",
                "description": "Returns recent thread ids\/titles sorted by update time. Use the `limit` query\nparameter to bound result size.",
                "parameters": [
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Maximum records to return (endpoint specific caps apply).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "example": 100
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful list response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Chat"
                ],
                "summary": "Create a new conversation thread.",
                "description": "Creates a conversation container and persists an initial thread title.",
                "requestBody": {
                    "description": "Optional title for the new conversation",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "title": {
                                        "type": "string",
                                        "nullable": true,
                                        "example": "API Chat"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Resource created",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/chats\/{conversationId}": {
            "get": {
                "tags": [
                    "Chat"
                ],
                "summary": "Get one conversation with messages and runs.",
                "description": "Returns the thread metadata plus current message\/run snapshots for the\nauthenticated user.",
                "parameters": [
                    {
                        "name": "conversationId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Not found."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/chats\/{conversationId}\/messages": {
            "get": {
                "tags": [
                    "Chat"
                ],
                "summary": "List messages for a conversation.",
                "description": "Returns normalized message records in chronological order.",
                "parameters": [
                    {
                        "name": "conversationId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful list response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Not found."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/chats\/{conversationId}\/runs": {
            "get": {
                "tags": [
                    "Chat"
                ],
                "summary": "List runs for a conversation.",
                "description": "Returns run metadata sorted newest-first. Use `limit` to cap returned rows.",
                "parameters": [
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Maximum records to return (endpoint specific caps apply).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "example": 100
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful list response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Not found."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/chats\/{conversationId}\/runs\/{runId}\/events": {
            "get": {
                "tags": [
                    "Chat"
                ],
                "summary": "List events for a specific run.",
                "description": "Returns the selected run plus ordered event payloads. Use `limit` to bound\nevent rows.",
                "parameters": [
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Maximum records to return (endpoint specific caps apply).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "example": 100
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Not found."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/chats\/{conversationId}\/stream": {
            "post": {
                "tags": [
                    "Chat"
                ],
                "summary": "Stream a chat run over server-sent events.",
                "description": "Expects the full message history and executes against the latest non-empty\nuser message.",
                "parameters": [
                    {
                        "name": "conversationId",
                        "in": "path",
                        "description": "Conversation identifier.",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Full client-side message history; backend executes using the latest user message",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "messages"
                                ],
                                "properties": {
                                    "messages": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "role": {
                                                    "type": "string",
                                                    "example": "user"
                                                },
                                                "content": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "parts": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "text": {
                                                                "type": "string",
                                                                "nullable": true
                                                            },
                                                            "type": {
                                                                "type": "string",
                                                                "nullable": true
                                                            }
                                                        }
                                                    },
                                                    "nullable": true
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Server-sent event stream (Vercel AI data stream protocol)",
                        "content": {
                            "text\/event-stream": {
                                "schema": {
                                    "type": "string",
                                    "example": "data: {\"type\":\"start\"}\n\ndata: [DONE]\n\n"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Not found."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/chat\/stream": {
            "post": {
                "tags": [
                    "Chat"
                ],
                "summary": "Stream a chat run over server-sent events.",
                "description": "Expects the full message history and executes against the latest non-empty\nuser message.",
                "requestBody": {
                    "description": "Full client-side message history; backend executes using the latest user message",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "messages"
                                ],
                                "properties": {
                                    "messages": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "role": {
                                                    "type": "string",
                                                    "example": "user"
                                                },
                                                "content": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "parts": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "text": {
                                                                "type": "string",
                                                                "nullable": true
                                                            },
                                                            "type": {
                                                                "type": "string",
                                                                "nullable": true
                                                            }
                                                        }
                                                    },
                                                    "nullable": true
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Server-sent event stream (Vercel AI data stream protocol)",
                        "content": {
                            "text\/event-stream": {
                                "schema": {
                                    "type": "string",
                                    "example": "data: {\"type\":\"start\"}\n\ndata: [DONE]\n\n"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Not found."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/settings\/profile": {
            "get": {
                "tags": [
                    "Profile"
                ],
                "summary": "Get the authenticated user's profile.",
                "responses": {
                    "200": {
                        "description": "Authenticated user profile",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "email": {
                                                    "type": "string"
                                                },
                                                "avatar": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "createdAt": {
                                                    "format": "date-time",
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "updatedAt": {
                                                    "format": "date-time",
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "patch": {
                "tags": [
                    "Profile"
                ],
                "summary": "Update profile fields.",
                "description": "Currently supports `name` updates.",
                "requestBody": {
                    "description": "Update profile fields",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "name"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Christopher David"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Authenticated user profile",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "email": {
                                                    "type": "string"
                                                },
                                                "avatar": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "createdAt": {
                                                    "format": "date-time",
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "updatedAt": {
                                                    "format": "date-time",
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Profile"
                ],
                "summary": "Delete the authenticated account.",
                "description": "Requires confirming the currently authenticated email address.",
                "requestBody": {
                    "description": "Email confirmation required before deleting account",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "email"
                                ],
                                "properties": {
                                    "email": {
                                        "format": "email",
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/whispers": {
            "get": {
                "tags": [
                    "Whispers"
                ],
                "summary": "List whispers for the authenticated user.",
                "description": "Without `with`, returns a unified inbox\/outbox stream. With `with`, returns\nthe direct thread between the actor and the referenced user.",
                "parameters": [
                    {
                        "name": "with",
                        "in": "query",
                        "description": "Conversation peer id or handle (for thread-scoped whisper retrieval).",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "agent:autopilot"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Number of records to return (default 50, max effective 200).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "example": 50
                        }
                    },
                    {
                        "name": "before_id",
                        "in": "query",
                        "description": "Pagination cursor: return rows with id lower than this value.",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "example": 12345
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Whisper inbox\/thread response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "body": {
                                                        "type": "string"
                                                    },
                                                    "sender": {
                                                        "type": "object",
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer"
                                                            },
                                                            "name": {
                                                                "type": "string"
                                                            },
                                                            "handle": {
                                                                "type": "string"
                                                            },
                                                            "avatar": {
                                                                "type": "string",
                                                                "nullable": true
                                                            }
                                                        }
                                                    },
                                                    "recipient": {
                                                        "type": "object",
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer"
                                                            },
                                                            "name": {
                                                                "type": "string"
                                                            },
                                                            "handle": {
                                                                "type": "string"
                                                            },
                                                            "avatar": {
                                                                "type": "string",
                                                                "nullable": true
                                                            }
                                                        }
                                                    },
                                                    "readAt": {
                                                        "format": "date-time",
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "createdAt": {
                                                        "format": "date-time",
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "updatedAt": {
                                                        "format": "date-time",
                                                        "type": "string",
                                                        "nullable": true
                                                    }
                                                }
                                            }
                                        },
                                        "meta": {
                                            "type": "object",
                                            "properties": {
                                                "nextCursor": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "with": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "This action is unauthorized."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Not found."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Whispers"
                ],
                "summary": "Send a new whisper.",
                "requestBody": {
                    "description": "Send a direct whisper to a user by id or handle.",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "recipientId": {
                                        "type": "integer",
                                        "nullable": true,
                                        "example": 42
                                    },
                                    "recipientHandle": {
                                        "type": "string",
                                        "nullable": true,
                                        "example": "agent:autopilot"
                                    },
                                    "body": {
                                        "type": "string",
                                        "maxLength": 5000,
                                        "example": "hey"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Whisper response payload",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "body": {
                                                    "type": "string"
                                                },
                                                "sender": {
                                                    "type": "object",
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer"
                                                        },
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "handle": {
                                                            "type": "string"
                                                        },
                                                        "avatar": {
                                                            "type": "string",
                                                            "nullable": true
                                                        }
                                                    }
                                                },
                                                "recipient": {
                                                    "type": "object",
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer"
                                                        },
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "handle": {
                                                            "type": "string"
                                                        },
                                                        "avatar": {
                                                            "type": "string",
                                                            "nullable": true
                                                        }
                                                    }
                                                },
                                                "readAt": {
                                                    "format": "date-time",
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "createdAt": {
                                                    "format": "date-time",
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "updatedAt": {
                                                    "format": "date-time",
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "This action is unauthorized."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Not found."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/whispers\/{id}\/read": {
            "patch": {
                "tags": [
                    "Whispers"
                ],
                "summary": "Mark a whisper as read.",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Whisper response payload",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "body": {
                                                    "type": "string"
                                                },
                                                "sender": {
                                                    "type": "object",
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer"
                                                        },
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "handle": {
                                                            "type": "string"
                                                        },
                                                        "avatar": {
                                                            "type": "string",
                                                            "nullable": true
                                                        }
                                                    }
                                                },
                                                "recipient": {
                                                    "type": "object",
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer"
                                                        },
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "handle": {
                                                            "type": "string"
                                                        },
                                                        "avatar": {
                                                            "type": "string",
                                                            "nullable": true
                                                        }
                                                    }
                                                },
                                                "readAt": {
                                                    "format": "date-time",
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "createdAt": {
                                                    "format": "date-time",
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "updatedAt": {
                                                    "format": "date-time",
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "This action is unauthorized."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Not found."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/agent-payments\/wallet": {
            "get": {
                "tags": [
                    "Agent Payments"
                ],
                "summary": "Get the authenticated user's Spark wallet metadata.",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Not found."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Agent Payments"
                ],
                "summary": "Create or import wallet for the authenticated user.",
                "requestBody": {
                    "description": "Create a new Spark wallet for the current user, or import an existing one with a mnemonic.",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "mnemonic": {
                                        "type": "string",
                                        "nullable": true,
                                        "example": "abandon ability able about above absent absorb abstract absurd abuse access accident"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/agent-payments\/balance": {
            "get": {
                "tags": [
                    "Agent Payments"
                ],
                "summary": "Get current wallet balance for authenticated user.",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Not found."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/agent-payments\/invoice": {
            "post": {
                "tags": [
                    "Agent Payments"
                ],
                "summary": "Create a Lightning invoice from the authenticated user's wallet.",
                "requestBody": {
                    "description": "Create a Lightning invoice from the authenticated user wallet.",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "amountSats"
                                ],
                                "properties": {
                                    "amountSats": {
                                        "type": "integer",
                                        "example": 1000
                                    },
                                    "description": {
                                        "type": "string",
                                        "nullable": true,
                                        "example": "Fund agent wallet"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/agent-payments\/pay": {
            "post": {
                "tags": [
                    "Agent Payments"
                ],
                "summary": "Pay a BOLT11 invoice from the authenticated user's wallet.",
                "requestBody": {
                    "description": "Pay a BOLT11 invoice from the authenticated user wallet.",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "invoice"
                                ],
                                "properties": {
                                    "invoice": {
                                        "type": "string",
                                        "example": "lnbc10u1..."
                                    },
                                    "maxAmountSats": {
                                        "type": "integer",
                                        "nullable": true,
                                        "example": 100
                                    },
                                    "maxAmountMsats": {
                                        "type": "integer",
                                        "nullable": true,
                                        "example": 100000
                                    },
                                    "timeoutMs": {
                                        "type": "integer",
                                        "nullable": true,
                                        "example": 12000
                                    },
                                    "host": {
                                        "type": "string",
                                        "nullable": true,
                                        "example": "sats4ai.com"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/agent-payments\/send-spark": {
            "post": {
                "tags": [
                    "Agent Payments"
                ],
                "summary": "Send sats to another Spark address from authenticated user's wallet.",
                "requestBody": {
                    "description": "Send sats to a Spark address from the authenticated user wallet.",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "sparkAddress",
                                    "amountSats"
                                ],
                                "properties": {
                                    "sparkAddress": {
                                        "type": "string",
                                        "example": "someone@spark.wallet"
                                    },
                                    "amountSats": {
                                        "type": "integer",
                                        "example": 21
                                    },
                                    "timeoutMs": {
                                        "type": "integer",
                                        "nullable": true,
                                        "example": 12000
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/agents\/me\/wallet": {
            "get": {
                "tags": [
                    "Agent Payments"
                ],
                "summary": "Get the authenticated user's Spark wallet metadata.",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Not found."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Agent Payments"
                ],
                "summary": "Create or import wallet for the authenticated user.",
                "requestBody": {
                    "description": "Create a new Spark wallet for the current user, or import an existing one with a mnemonic.",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "mnemonic": {
                                        "type": "string",
                                        "nullable": true,
                                        "example": "abandon ability able about above absent absorb abstract absurd abuse access accident"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/agents\/me\/balance": {
            "get": {
                "tags": [
                    "Agent Payments"
                ],
                "summary": "Get current wallet balance for authenticated user.",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Not found."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/payments\/invoice": {
            "post": {
                "tags": [
                    "Agent Payments"
                ],
                "summary": "Create a Lightning invoice from the authenticated user's wallet.",
                "requestBody": {
                    "description": "Create a Lightning invoice from the authenticated user wallet.",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "amountSats"
                                ],
                                "properties": {
                                    "amountSats": {
                                        "type": "integer",
                                        "example": 1000
                                    },
                                    "description": {
                                        "type": "string",
                                        "nullable": true,
                                        "example": "Fund agent wallet"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/payments\/pay": {
            "post": {
                "tags": [
                    "Agent Payments"
                ],
                "summary": "Pay a BOLT11 invoice from the authenticated user's wallet.",
                "requestBody": {
                    "description": "Pay a BOLT11 invoice from the authenticated user wallet.",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "invoice"
                                ],
                                "properties": {
                                    "invoice": {
                                        "type": "string",
                                        "example": "lnbc10u1..."
                                    },
                                    "maxAmountSats": {
                                        "type": "integer",
                                        "nullable": true,
                                        "example": 100
                                    },
                                    "maxAmountMsats": {
                                        "type": "integer",
                                        "nullable": true,
                                        "example": 100000
                                    },
                                    "timeoutMs": {
                                        "type": "integer",
                                        "nullable": true,
                                        "example": 12000
                                    },
                                    "host": {
                                        "type": "string",
                                        "nullable": true,
                                        "example": "sats4ai.com"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/payments\/send-spark": {
            "post": {
                "tags": [
                    "Agent Payments"
                ],
                "summary": "Send sats to another Spark address from authenticated user's wallet.",
                "requestBody": {
                    "description": "Send sats to a Spark address from the authenticated user wallet.",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "sparkAddress",
                                    "amountSats"
                                ],
                                "properties": {
                                    "sparkAddress": {
                                        "type": "string",
                                        "example": "someone@spark.wallet"
                                    },
                                    "amountSats": {
                                        "type": "integer",
                                        "example": 21
                                    },
                                    "timeoutMs": {
                                        "type": "integer",
                                        "nullable": true,
                                        "example": 12000
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/l402\/wallet": {
            "get": {
                "tags": [
                    "L402"
                ],
                "summary": "Get wallet-level Lightning spend summary.",
                "description": "Returns aggregate L402 payment stats, latest paid receipt, and configured\nclient-side policy settings.",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/l402\/transactions": {
            "get": {
                "tags": [
                    "L402"
                ],
                "summary": "List L402 transaction receipts.",
                "description": "Returns paginated receipt rows that include payment, cache, and run\ncorrelation metadata.",
                "parameters": [
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Paginated result size (1-200).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "maximum": 200,
                            "minimum": 1,
                            "example": 30
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/l402\/transactions\/{eventId}": {
            "get": {
                "tags": [
                    "L402"
                ],
                "summary": "Get one L402 transaction receipt by event id.",
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Not found."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/l402\/paywalls": {
            "get": {
                "tags": [
                    "L402"
                ],
                "summary": "Get paywall aggregation by host\/scope.",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/l402\/settlements": {
            "get": {
                "tags": [
                    "L402"
                ],
                "summary": "Get settlement-focused paid receipt summary.",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/api\/l402\/deployments": {
            "get": {
                "tags": [
                    "L402"
                ],
                "summary": "List L402 deployment and gateway-related operational events.",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "securitySchemes": {
            "SanctumToken": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "Sanctum PAT"
            }
        }
    },
    "security": [
        {
            "SanctumToken": []
        }
    ],
    "tags": [
        {
            "name": "Auth",
            "description": "Authentication context and token lifecycle endpoints."
        },
        {
            "name": "Chat",
            "description": "Conversation, run, and stream endpoints."
        },
        {
            "name": "Profile",
            "description": "Authenticated profile management endpoints."
        },
        {
            "name": "Shouts",
            "description": "Global public broadcast messages, optionally scoped by zone."
        },
        {
            "name": "Whispers",
            "description": "Direct messages between two users, inbox and thread retrieval."
        },
        {
            "name": "L402",
            "description": "Lightning L402 wallet, receipts, and deployment telemetry endpoints."
        },
        {
            "name": "Agent Payments",
            "description": "Per-user Spark wallet lifecycle and payment APIs (invoice + pay + spark transfers)."
        }
    ],
    "x-generatedBy": "vyuldashev\/laravel-openapi"
}