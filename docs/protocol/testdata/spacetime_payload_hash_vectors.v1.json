{
  "version": "spacetime.payload_hash.v1",
  "algorithm": "sha256",
  "vectors": [
    {
      "name": "subscribe-request",
      "payload": {
        "schema_version": 1,
        "protocol_version": "spacetime.sync.v1",
        "request_id": "req_123",
        "resume_after": [
          {
            "watermark": 40,
            "stream_id": "runtime.codex.worker.worker_1"
          },
          {
            "watermark": 11,
            "stream_id": "runtime.run.run_7"
          }
        ],
        "stream_ids": [
          "runtime.codex.worker.worker_1",
          "runtime.run.run_7"
        ],
        "client_build_id": "20260225T190000Z"
      },
      "canonical_json": "{\"client_build_id\":\"20260225T190000Z\",\"protocol_version\":\"spacetime.sync.v1\",\"request_id\":\"req_123\",\"resume_after\":[{\"stream_id\":\"runtime.codex.worker.worker_1\",\"watermark\":40},{\"stream_id\":\"runtime.run.run_7\",\"watermark\":11}],\"schema_version\":1,\"stream_ids\":[\"runtime.codex.worker.worker_1\",\"runtime.run.run_7\"]}",
      "sha256": "sha256:c28753f57a943954e00f689f97539e7622f427a736a3dfa299ce341c6a48167a"
    },
    {
      "name": "subscribe-applied",
      "payload": {
        "current_watermarks": [
          {
            "stream_id": "runtime.codex.worker.worker_1",
            "watermark": 42
          },
          {
            "stream_id": "runtime.run.run_7",
            "watermark": 12
          }
        ],
        "replay_complete": false,
        "subscription_id": "sub_abc"
      },
      "canonical_json": "{\"current_watermarks\":[{\"stream_id\":\"runtime.codex.worker.worker_1\",\"watermark\":42},{\"stream_id\":\"runtime.run.run_7\",\"watermark\":12}],\"replay_complete\":false,\"subscription_id\":\"sub_abc\"}",
      "sha256": "sha256:54129c7fa74bc794c0b07a0ea5fbdc90779c1201db3d188a32ee5e05cadcb3a6"
    },
    {
      "name": "transaction-update",
      "payload": {
        "stream_id": "runtime.codex.worker.worker_1",
        "seq": 43,
        "payload_hash": "sha256:deadbeef",
        "payload": {
          "status": "running",
          "turn_id": "turn_1",
          "thread_id": "thr_1"
        },
        "confirmed_read": true,
        "replayed": false
      },
      "canonical_json": "{\"confirmed_read\":true,\"payload\":{\"status\":\"running\",\"thread_id\":\"thr_1\",\"turn_id\":\"turn_1\"},\"payload_hash\":\"sha256:deadbeef\",\"replayed\":false,\"seq\":43,\"stream_id\":\"runtime.codex.worker.worker_1\"}",
      "sha256": "sha256:d7708f0749f6bf8137799f744e67e7d3395d72f661cdb297003c879256387d68"
    },
    {
      "name": "stale-cursor-error",
      "payload": {
        "code": "stale_cursor",
        "message": "cursor below retention floor",
        "full_resync_required": true,
        "protocol_version": "spacetime.sync.v1",
        "min_client_build_id": "20260225T150000Z",
        "max_client_build_id": "",
        "stale_cursor_recovery": [
          {
            "stream_id": "runtime.codex.worker.worker_1",
            "requested_watermark": 12,
            "retention_floor": 21,
            "replay_budget_floor": 33,
            "reason_code": "retention_floor_breach"
          }
        ]
      },
      "canonical_json": "{\"code\":\"stale_cursor\",\"full_resync_required\":true,\"max_client_build_id\":\"\",\"message\":\"cursor below retention floor\",\"min_client_build_id\":\"20260225T150000Z\",\"protocol_version\":\"spacetime.sync.v1\",\"stale_cursor_recovery\":[{\"reason_code\":\"retention_floor_breach\",\"replay_budget_floor\":33,\"requested_watermark\":12,\"retention_floor\":21,\"stream_id\":\"runtime.codex.worker.worker_1\"}]}",
      "sha256": "sha256:8c76ffd7f3cafe5bb1de86354c6b02f1fa1ecd99e00e7989022bb56826967e3c"
    },
    {
      "name": "heartbeat",
      "payload": {
        "watermarks": [
          {
            "watermark": 44,
            "stream_id": "runtime.codex.worker.worker_1"
          },
          {
            "watermark": 13,
            "stream_id": "runtime.run.run_7"
          }
        ]
      },
      "canonical_json": "{\"watermarks\":[{\"stream_id\":\"runtime.codex.worker.worker_1\",\"watermark\":44},{\"stream_id\":\"runtime.run.run_7\",\"watermark\":13}]}",
      "sha256": "sha256:3ea39781232fcca6ffdb01882c7aa469f7a77f84a6011d8c98f02e3737ea4984"
    }
  ]
}
