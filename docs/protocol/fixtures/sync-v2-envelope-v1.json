{
  "schema": "openagents.sync.v2.fixture.v1",
  "subscribe": {
    "stream_ids": [
      "runtime.codex.worker.worker_1",
      "runtime.run.run_7"
    ],
    "resume_after": [
      {
        "stream_id": "runtime.codex.worker.worker_1",
        "watermark": 42
      },
      {
        "stream_id": "runtime.run.run_7",
        "watermark": 12
      }
    ],
    "request_id": "req_sync_1",
    "client_build_id": "20260225T210000Z",
    "protocol_version": "spacetime.sync.v1",
    "schema_version": 1,
    "resume_token": {
      "token_id": "resume_tok_1",
      "issued_at_unix_ms": 1739930000000,
      "expires_at_unix_ms": 1739930300000,
      "checkpoints": [
        {
          "stream_id": "runtime.codex.worker.worker_1",
          "last_applied_seq": 42,
          "durable_offset": 10042
        }
      ]
    }
  },
  "subscribe_applied": {
    "subscription_id": "sub_sync_1",
    "replay_complete": false,
    "current_watermarks": [
      {
        "stream_id": "runtime.codex.worker.worker_1",
        "watermark": 42
      }
    ],
    "accepted_checkpoints": [
      {
        "stream_id": "runtime.codex.worker.worker_1",
        "last_applied_seq": 42,
        "durable_offset": 10042
      }
    ]
  },
  "transaction_batch": {
    "replay_complete": false,
    "head_watermarks": [
      {
        "stream_id": "runtime.codex.worker.worker_1",
        "watermark": 43
      }
    ],
    "updates": [
      {
        "stream_id": "runtime.codex.worker.worker_1",
        "seq": 43,
        "payload": "{\"status\":\"running\"}",
        "payload_hash": "sha256:deadbeef",
        "replayed": false,
        "confirmed_read": true
      }
    ]
  },
  "error": {
    "code": "SYNC_ERROR_CODE_STALE_CURSOR",
    "message": "cursor below retention floor",
    "retry_after_ms": 1000,
    "full_resync_required": true,
    "upgrade_required": false,
    "min_client_build_id": "20260225T190000Z",
    "max_client_build_id": "",
    "min_schema_version": 1,
    "max_schema_version": 1,
    "protocol_version": "spacetime.sync.v1",
    "stale_cursor_recovery": [
      {
        "stream_id": "runtime.codex.worker.worker_1",
        "requested_watermark": 12,
        "retention_floor": 21,
        "replay_budget_floor": 33,
        "full_resync_required": true,
        "reason_code": "retention_floor_breach"
      }
    ]
  }
}
